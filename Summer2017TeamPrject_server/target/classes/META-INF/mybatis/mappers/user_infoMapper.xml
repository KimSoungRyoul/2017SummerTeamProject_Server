<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="improve.server.repository.UserInfoRepository">

	<resultMap id="userInfoResultMap" type="UserInfo">
		<id property="email" column="user_email" />
		<result property="password" column="user_password" />
		<result property="name" column="user_name" />
		<result property="phoneNum" column="user_phone_num" />
		<!-- <result property="gender" column="user_gender" /> -->
		<result property="birthDate" column="user_birthdate" javaType="java.util.Date" />
		<result property="regDate" column="user_regdate" javaType="java.util.Date" />
		<!-- <result property="obligation" column="user_national_obligation" /> -->
		<!-- <association property="userProfilePhoto"
			select="improve.server.mappers.fileInfoMapper.findByUserEmail"
			column="userEmail=user_email" /> -->
	</resultMap>

<!-- 	user_birthdate, -->
		<!-- user_national_obligation -->
		<!-- #{birthDate}, -->
		<!-- #{obligation} -->
	<insert id="insert">
		INSERT INTO tbl_user_info
		(
		user_email,
		user_password,
		user_name,
		user_gender,
		user_phone_num
	
		)
		VALUES
		(
		#{email},
		password(#{password}),
		#{name},
		#{gender},
		#{phoneNum}
		
		);
	</insert>





	<!-- findByUserEmail -->
	<select id="selectOne" resultMap="userInfoResultMap">
		SELECT * FROM
		tbl_user_info
		where
		user_email=#{email}
	</select>


	<update id="update">
		UPDATE tbl_user_info
		SET
		user_email = #{email},
		user_password = password(#{password}),
		user_name = #{name},
		user_gender
		= #{gender},
		user_phone_num = #{phoneNum},
		user_birthdate = #{birthDate},
		user_update_date = now(),
		user_national_obligation = #{obligation}
		WHERE user_email = #{email};


	</update>


	<delete id="delete">
		DELETE FROM tbl_user_info
		WHERE user_email = #{id}
	</delete>





</mapper>